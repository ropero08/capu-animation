<!-- ==== SECCIONES INTERACTIVAS ==== -->
<section class="card">
  <h3>Secciones Interactivas</h3>
  <div class="grid" id="interactiveSections"></div>
</section>

<!-- ==== MODAL ==== -->
<div id="modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;z-index:100;">
  <div style="background:#fff;padding:20px;border-radius:12px;max-width:800px;width:90%;position:relative;">
    <button id="closeModal" style="position:absolute;top:10px;right:10px;padding:6px 12px;cursor:pointer;">Cerrar</button>
    <div id="modalContent"></div>
  </div>
</div>

<script>
/* ---- FUNCIÓN PARA AGARRAR ELEMENTOS ---- */
function $(id){ return document.getElementById(id); }

/* ---- TRES SECCIONES ---- */
let sections = [
  { id:1, title:"Sección 1", media:[] },
  { id:2, title:"Sección 2", media:[] },
  { id:3, title:"Sección 3", media:[] }
];

const interactiveSections = $('interactiveSections');

function renderInteractiveSections(){

  interactiveSections.innerHTML = '';

  sections.forEach(sec => {

    const div = document.createElement('div');
    div.className = 'dist';

    div.innerHTML = `
      <div class="hdr"><h3>${sec.title}</h3></div>

      <div class="file-row">
        <label class="upload-btn">
          Subir video
          <input type="file" accept="video/*" style="display:none">
        </label>

        <label class="upload-btn">
          Subir PDF
          <input type="file" accept="application/pdf" style="display:none">
        </label>
      </div>

      <div style="margin-top:10px;text-align:center;">
        <button class="small-btn view-btn">Ver Contenido</button>
      </div>
    `;

    interactiveSections.appendChild(div);

    // Inputs
    const inputs = div.querySelectorAll('input[type="file"]');
    const videoInput = inputs[0];
    const pdfInput = inputs[1];

    /* ---- SUBIR VIDEO ---- */
    videoInput.addEventListener("change", e => {
      const file = e.target.files[0];
      if(!file) return;
      sec.media.push({ type:"video", url:URL.createObjectURL(file) });
      alert("¡Video agregado!");
    });

    /* ---- SUBIR PDF ---- */
    pdfInput.addEventListener("change", e => {
      const file = e.target.files[0];
      if(!file) return;
      sec.media.push({ type:"pdf", url:URL.createObjectURL(file) });
      alert("¡PDF agregado!");
    });

    /* ---- VER CONTENIDO ---- */
    div.querySelector(".view-btn").addEventListener("click", () => {

      const modal = $('modal');
      const content = $('modalContent');
      content.innerHTML = '';

      if(sec.media.length === 0){
        content.innerHTML = "<p>No hay contenido aún.</p>";
      }
      else{
        sec.media.forEach(m => {
          if(m.type === "video"){
            const vid = document.createElement("video");
            vid.controls = true;
            vid.src = m.url;
            vid.style.width = "100%";
            content.appendChild(vid);
          }

          if(m.type === "pdf"){
            const frame = document.createElement("iframe");
            frame.src = m.url;
            frame.style.width = "100%";
            frame.style.height = "500px";
            content.appendChild(frame);
          }
        });
      }

      modal.style.display = "flex";
    });

  });
}

/* ---- CERRAR MODAL ---- */
$('closeModal').addEventListener("click", () => {
  $('modal').style.display = "none";
});

/* ---- INICIAR ---- */
renderInteractiveSections();
</script>
