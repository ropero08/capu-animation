<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CAPU Animation</title>
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;700&family=Montserrat:ital,wght@0,400;0,700;1,600&display=swap" rel="stylesheet">

  <style>
    :root{
      /* ðŸŽ¨ COLORES BASE (EDITABLES DESDE PANEL) */
      --bg:#fffaf6;
      --card:#fff;
      --accent:#f7d6d0;
      --muted:#6b6464;
      --soft:#f3eefc;

      /* Colores personalizados */
      --color-primario: #fbe8e6;
      --color-secundario: #e8f6f3;
      --color-texto: #2b2b2b;

      /* FONDOS PERSONALIZABLES */
      --bg-landing: url('');
      --bg-app: url('');
    }

    *{box-sizing:border-box}
    body{
      font-family:'Josefin Sans', system-ui, sans-serif;
      margin:0;
      color:var(--color-texto);
    }

    /* ðŸŽ¨ Fondo del Landing (Antes de iniciar sesiÃ³n) */
    #landing{
      background: var(--bg-landing), linear-gradient(180deg,var(--color-secundario),var(--color-primario));
      background-size: cover;
      background-position: center;
      padding:40px 28px; 
      text-align:center
    }

    /* Fondo despuÃ©s de iniciar sesiÃ³n */
    #app{
      background: var(--bg-app), linear-gradient(180deg,var(--color-primario),var(--color-secundario));
      background-size: cover;
      background-position: center;
      min-height: 100vh;
      padding-bottom: 50px;
    }

    /* HEADER */
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:18px 28px;
    }

    .logo{
      font-family:'Montserrat';
      font-weight:700;
      color:#5b4b4b;
      font-size:34px;
      letter-spacing:1px
    }

    .sub{font-size:12px;color:var(--muted);}

    .hero{padding:40px 28px; text-align:center}
    .bigtitle{font-family:'Montserrat';font-size:64px;color:#5b4b4b;margin:8px 0}
    .lead{max-width:800px;margin:0 auto;color:#4b3f3f}

    .btn{
      display:inline-block;
      padding:10px 18px;
      border-radius:14px;
      background:var(--color-primario);
      border:1px solid rgba(0,0,0,0.06);
      cursor:pointer
    }
    .btn.secondary{
      background:transparent;
      border:1px solid rgba(0,0,0,0.15)
    }

    .container{max-width:1100px;margin:20px auto;padding:18px}
    .card{
      background:var(--card);
      padding:18px;
      border-radius:14px;
      box-shadow:0 6px 18px rgba(58,50,50,0.06)
    }

    /* GRID */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:18px}

    .dist{
      padding:12px;
      border-radius:14px;
      background:rgba(255,255,255,0.85);
      min-height:260px
    }

    /* PANEL DE CONFIGURACIÃ“N */
    #configPanel{
      position:fixed;
      bottom:20px;
      right:20px;
      background:#ffffffcc;
      backdrop-filter:blur(6px);
      padding:16px;
      border-radius:12px;
      box-shadow:0 6px 18px rgba(0,0,0,0.2);
      display:none;
      z-index:9999;
    }
    #configPanel h3{margin:0 0 10px 0;}
    #configPanel input[type="color"],
    #configPanel input[type="file"]{
      margin-bottom:10px;
    }

    #openConfig{
      position:fixed;
      right:20px;
      bottom:20px;
      z-index:999;
      padding:12px 16px;
      border-radius:50%;
      background:#ffdcdc;
      cursor:pointer;
      border:1px solid #0002;
      font-weight:bold;
    }
  </style>
</head>

<body>

  <header>
    <div class="logo">CAPU <span style="color:#7a6b6b">Animation</span></div>
    <div id="topRight" class="nav">
      <button id="btnCreate" class="btn">Crear cuenta</button>
    </div>
  </header>

  <main>

    <!-- LANDING -->
    <section id="landing" class="hero">
      <div class="bigtitle">CAPU Animation</div>
      <p class="lead">Un espacio para compartir videos, documentos y devociÃ³n dominicana.</p>
      <div style="margin-top:20px">
        <button id="openCreate" class="btn">Crear cuenta con correo</button>
      </div>
    </section>

    <!-- MODAL -->
    <div id="registerModal" style="display:none;position:fixed;inset:0;background:#0005;align-items:center;justify-content:center;">
      <div class="card" style="width:360px;margin:auto">
        <h3>Crear cuenta</h3>
        <p class="sub">Ingresa tu correo para entrar</p>
        <input id="emailInput" type="email" placeholder="tu@correo.com" style="width:100%;padding:10px;border-radius:8px;margin-top:8px;border:1px solid #eee">
        <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
          <button id="cancelReg" class="btn secondary">Cancelar</button>
          <button id="submitReg" class="btn">Crear y entrar</button>
        </div>
      </div>
    </div>

    <!-- APP -->
    <section id="app" style="display:none">
      <div class="container">
        <div class="card" style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-size:20px;font-weight:700">Bienvenid@, <span id="userName">usuario</span></div>
            <div class="sub">Comparte animaciones y documentos</div>
          </div>
          <div class="user-pill">
            <div id="userEmail"></div>
            <div class="avatar"><img id="avatarImg" src="https://via.placeholder.com/80?text=U" width="40"></div>
          </div>
        </div>

        <div style="margin-top:16px" class="card">
          <h3>PropÃ³sito</h3>
          <div id="purposeText" class="editable" contenteditable="true">AquÃ­ puedes escribir...</div>
          <button id="savePurpose" class="btn">Guardar</button>
        </div>

        <div style="margin-top:18px" class="card">
          <h3>Distribuciones</h3>
          <div class="grid" id="distsContainer"></div>
        </div>

      </div>
    </section>

    <footer style="padding:28px;text-align:center;color:var(--muted)">CAPU Animation â€¢ Demo local</footer>

  </main>

  <!-- âš™ PANEL CONFIGURACIÃ“N -->
  <button id="openConfig">âš™</button>

  <div id="configPanel">
    <h3>Personalizar</h3>

    Fondo Landing:
    <input type="file" id="bgLandingInput"><br>

    Fondo App:
    <input type="file" id="bgAppInput"><br>

    Color Primario:
    <input type="color" id="colorPrimario"><br>

    Color Secundario:
    <input type="color" id="colorSecundario"><br>

    Color Texto:
    <input type="color" id="colorTexto"><br>

    <button id="resetStyles" class="btn secondary">Reset</button>
  </div>

  <script>
    /* ------------------------------
       LOGIN SIMPLE
    ------------------------------ */
    const registerModal = document.getElementById('registerModal');
    const emailInput = document.getElementById('emailInput');
    const app = document.getElementById('app');
    const landing = document.getElementById('landing');

    document.getElementById('openCreate').onclick = () => registerModal.style.display='flex';
    document.getElementById('btnCreate').onclick = () => registerModal.style.display='flex';
    document.getElementById('cancelReg').onclick = () => registerModal.style.display='none';

    document.getElementById('submitReg').onclick = ()=>{
      const email = emailInput.value.trim();
      if(!email.includes('@')) return alert("Correo invÃ¡lido");
      localStorage.setItem("capu_user", JSON.stringify({email, name: email.split('@')[0]}));
      initApp();
    };

    function initApp(){
      const u = JSON.parse(localStorage.getItem("capu_user"));
      if(!u) return;

      landing.style.display='none';
      app.style.display='block';

      /* â— OCULTAR HEADER DESPUÃ‰S DE INICIAR SESIÃ“N */
      document.querySelector("header").style.display = "none";

      document.getElementById("userName").textContent = u.name;
      document.getElementById("userEmail").textContent = u.email;
    }

    if(localStorage.getItem("capu_user")) initApp();

    /* ------------------------------
       PANEL CONFIGURACIÃ“N
    ------------------------------ */
    const panel = document.getElementById("configPanel");

    document.getElementById("openConfig").onclick = ()=>{
      panel.style.display = panel.style.display === "block" ? "none" : "block";
    };

    // Fondo Landing
    document.getElementById("bgLandingInput").onchange = e=>{
      const f = e.target.files[0];
      if(!f) return;
      const url = URL.createObjectURL(f);
      document.documentElement.style.setProperty("--bg-landing", `url('${url}')`);
      localStorage.setItem("bgLanding", url);
    };

    // Fondo App
    document.getElementById("bgAppInput").onchange = e=>{
      const f = e.target.files[0];
      if(!f) return;
      const url = URL.createObjectURL(f);
      document.documentElement.style.setProperty("--bg-app", `url('${url}')`);
      localStorage.setItem("bgApp", url);
    };

    // Colores
    document.getElementById("colorPrimario").oninput = e=>{
      document.documentElement.style.setProperty("--color-primario", e.target.value);
      localStorage.setItem("colorPrimario", e.target.value);
    };

    document.getElementById("colorSecundario").oninput = e=>{
      document.documentElement.style.setProperty("--color-secundario", e.target.value);
      localStorage.setItem("colorSecundario", e.target.value);
    };

    document.getElementById("colorTexto").oninput = e=>{
      document.documentElement.style.setProperty("--color-texto", e.target.value);
      localStorage.setItem("colorTexto", e.target.value);
    };

    // Cargar estilos guardados
    window.onload = ()=>{
      if(localStorage.bgLanding)
        document.documentElement.style.setProperty("--bg-landing", `url('${localStorage.bgLanding}')`);

      if(localStorage.bgApp)
        document.documentElement.style.setProperty("--bg-app", `url('${localStorage.bgApp}')`);

      if(localStorage.colorPrimario)
        document.documentElement.style.setProperty("--color-primario", localStorage.colorPrimario);

      if(localStorage.colorSecundario)
        document.documentElement.style.setProperty("--color-secundario", localStorage.colorSecundario);

      if(localStorage.colorTexto)
        document.documentElement.style.setProperty("--color-texto", localStorage.colorTexto);
    };

    // Reset
    document.getElementById("resetStyles").onclick = ()=>{
      localStorage.clear();
      location.reload();
    };
  </script>

</body>
</html>
